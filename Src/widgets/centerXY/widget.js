/* 2018-6-23 09:10:53 | 版权所有 火星科技 http://marsgis.cn  【联系我们QQ：516584683，微信：marsgis】 */
L.widget.bindClass(L.widget.BaseWidget.extend({map:null,options:{view:{type:"window",url:"view.html",windowOptions:{width:210,height:170}}},viewWindow:null,winCreateOK:function(t,i){this.viewWindow=i},markerXY:null,activate:function(){this.map.on("click",this.mouseClickHandler,this)},disable:function(){this.viewWindow=null,this.map.off("click",this.mouseClickHandler,this),this.markerXY&&(this.markerXY.remove(),this.markerXY=null)},mouseClickHandler:function(t){var i=this.map.convert2wgs(t.latlng);this.viewWindow.showLatlng({x:i[1],y:i[0]}),this.centerAt(i,!1)},getMapCenter:function(){var t=this.map.convert2wgs(this.map.getCenter());return{x:t[1],y:t[0]}},centerAt:function(t,i){var e=this.map.convert2map(t);null==this.markerXY?(this.markerXY=L.marker(e),this.map.addLayer(this.markerXY)):this.markerXY.setLatLng(e),this.map.centerAt(e)}}));