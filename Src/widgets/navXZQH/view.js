/* 2018-7-29 18:42:44 | 版权所有 火星科技 http://marsgis.cn  【联系我们QQ：516584683，微信：marsgis】 */
var thisWidget;function initWidgetView(t){thisWidget=t,$("#xzqh-select").citypicker({simple:!0});var i=$("#xzqh-select");i.hide(),i.citypicker("open");var n=-1;$(".city-picker-dropdown").on("click",".city-select a",function(){var t=String(i.data("citypicker").getCode()),e=i.data("citypicker").getVal();$("#cityname").html(e),-1!=n&&(clearTimeout(n),n=-1),n=setTimeout(function(){centerAtRegion(t,e)},200)})}function centerAtRegion(t,e){var i,n;"0000"==t.substring(2)?(i="xzqhdata/sheng/china.json",n=t.substring(0,2)):"00"==t.substring(4)?(i="xzqhdata/shi/"+t.substring(0,2)+".json",n=t.substring(0,4)):(i="xzqhdata/xian/"+t.substring(0,4)+"00.json",n=t,$("#con_wdx_1").hide()),$.getJSON(i,function(t){if(thisWidget.isActivate)for(var e=t.features.length,i=0;i<e;i++)if(t.features[i].properties.id==n){thisWidget.showRegionExtent(t.features[i]);break}});var s=e.lastIndexOf("/");-1!=s&&(e=e.substring(s+1)),e.length<=2?e+="&nbsp;":3<e.length&&(e=e.substring(0,2)+".."),$("#xzqh_sel").html(e)}function goHome(){$("#cityname").html(""),$("#xzqh-select").citypicker("reset"),thisWidget.goHome()}